{% extends "base.html" %}
{% block content %}
<h2>Transactions</h2>

<form method="POST">
    <select name="customer_id">
        {% for customer in customers %}
        <option value="{{ customer.id }}">{{ customer.name }}</option>
        {% endfor %}
    </select>
    <input type="text" name="items" placeholder="Items / Service Name">
    <input type="text" name="unit_type" placeholder="Unit (sq.ft / pcs / hours)">
    <input type="number" name="amount" placeholder="Amount" step="0.01">
    <input type="number" name="discount_percent" placeholder="Discount (%)" step="0.01">
    <input type="number" name="discount_flat" placeholder="Flat Discount" step="0.01">
    <select name="gst_type">
        <option value="gst">GST</option>
        <option value="non-gst">Non-GST</option>
    </select>
    <input type="number" name="paid" placeholder="Amount Paid" step="0.01">
    <input type="date" name="transaction_date">
    <button type="submit">Add Transaction</button>
</form>

<table>
    <tr>
        <th>Customer</th>
        <th>Items</th>
        <th>Amount</th>
        <th>Paid</th>
        <th>GST Type</th>
        <th>Date</th>
        <th>Actions</th>
    </tr>
    {% for t in transactions %}
    <tr>
        <td>{{ t.customer.name }}</td>
        <td>{{ t.items }}</td>
        <td>{{ t.amount }}</td>
        <td>{{ t.paid }}</td>
        <td>{{ t.gst_type }}</td>
        <td>{{ t.transaction_date }}</td>
        <td><a href="{{ url_for('receipt', transaction_id=t.id) }}">Receipt</a></td>
    </tr>
    {% endfor %}
</table>
{% endblock %}
